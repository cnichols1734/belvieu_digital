{% extends "base.html" %}

{% block title %}Set New Password — Belvieu Digital{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="card auth-card">
        {% if token_error %}
            <h1 class="auth-title">Invalid or expired link</h1>
            <p class="auth-subtitle">This password reset link is no longer valid. Please request a new one.</p>
            <a href="{{ url_for('auth.forgot_password') }}" class="btn btn-primary btn-lg btn-full">Request New Link</a>
        {% else %}
            <h1 class="auth-title">Set a new password</h1>
            <p class="auth-subtitle">Enter your new password below.</p>

            <form method="POST" action="{{ url_for('auth.reset_password', token=token) }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                <div class="form-group">
                    <label for="password">New Password</label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        class="form-control"
                        placeholder="At least 8 characters"
                        required
                        autofocus
                        minlength="8"
                    >
                </div>

                <div class="form-group">
                    <label for="password_confirm">Confirm New Password</label>
                    <input
                        type="password"
                        id="password_confirm"
                        name="password_confirm"
                        class="form-control"
                        placeholder="Repeat your new password"
                        required
                        minlength="8"
                    >
                </div>

                <button type="submit" class="btn btn-primary btn-lg btn-full">Set New Password</button>
            </form>
        {% endif %}

        <p class="auth-link" style="margin-top: 1.5rem; text-align: center;">
            <a href="{{ url_for('auth.login') }}">← Back to login</a>
        </p>
    </div>
</div>
{% endblock %}
